<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <script>
    const foo = () => {};
    const bar = () => {};

    foo();
    bar();

    //sleep 함수는 일정 시간(delay)이 경과한 이후에 콜백 함수를 호출한다.
    function sleep(func, delay) {
      // Date.now()는 현재 시간을 숫자(ms)로 반환한다.
      const delayUntil = Date.now() + delay;

      // 현재 시간(Date.now())에 delay를 더한 delayUntil이 현재 시간보다 작으면 계속 반복한다.
      while (Date.now() < delayUntil);
      // 일정 시간(delay)이 경과한 이후에 콜백 함수(func)를 호출한다.
      func();
    }

    function foo() {
      console.log("foo");
    }

    function bar() {
      console.log("bar");
    }

    // sleep 함수는 3초 이상 실행된다.
    sleep(foo, 3 * 1000);

    // bar 함수는 sleep 함수의 실행이 종료된 이후에 호출되므로 3초 이상 블로킹된다.
    bar();
    //(3초 경과 후) foo호출 -> bar호출

    //비동기 처리
    function foo() {
      console.log("foo");
    }

    function bar() {
      console.log("bar");
    }

    //타이머 함수 setTimeout은 일정 시간이 경과한 이후에 콜백 함수 foo를 호출한다.
    //타이머 함수 setTimeout은 bar 함수를 블로킹하지 않는다.
    setTimeout(foo, 3 * 1000);
    bar();
    //bar 호출 -> (3초 경과 후) foo 호출

    //42-04
    function foo() {
      console.log("foo");
    }

    function bar() {
      console.log("bar");
    }

    setTimeout(foo, 0); // 0초(실제는 4ms) 후에 foo 함수가 호출된다.
    bar();
  </script>
  <body></body>
</html>
